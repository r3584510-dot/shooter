<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>2D Shooter</title>
<style>
  body { margin:0; padding:0; background:#111; color:#fff; font-family:sans-serif; text-align:center; }
  canvas { background:#222; display:block; margin: 20px auto; border:2px solid #555; }
  #score { font-size: 18px; margin-top: 10px; }
</style>
</head>
<body>
<h1>2D Shooter</h1>
<canvas id="game" width="400" height="500"></canvas>
<div id="score">Очки: 0</div>
<p>Стрелять: ПРОБЕЛ | Движение: стрелки ← →</p>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

let player = {x: 190, y: 450, w: 20, h: 20, speed: 5};
let bullets = [];
let enemies = [];
let enemySpeed = 2;
let score = 0;
let gameOver = false;

// Создание врагов
function spawnEnemy() {
  const size = Math.random() > 0.8 ? 30 : 20;
  enemies.push({x: Math.random()*(canvas.width-size), y: 0, w: size, h: size, speed: enemySpeed});
}

// Обновление позиции объектов
function update() {
  if(gameOver) return;

  bullets.forEach(b => b.y -= 7);
  enemies.forEach(e => e.y += e.speed);

  bullets = bullets.filter(b => b.y > 0);
  enemies = enemies.filter(e => e.y < canvas.height);

  // Столкновение пули с врагом
  bullets.forEach((b,i) => {
    enemies.forEach((e,j) => {
      if(b.x < e.x+e.w && b.x+b.w > e.x && b.y < e.y+e.h && b.y+b.h > e.y){
        bullets.splice(i,1);
        enemies.splice(j,1);
        score += 1;
        document.getElementById('score').textContent = "Очки: " + score;
      }
    });
  });

  // Столкновение врага с игроком
  enemies.forEach(e => {
    if(player.x < e.x+e.w && player.x+player.w > e.x && player.y < e.y+e.h && player.y+player.h > e.y){
      gameOver = true;
      alert("Игра окончена! Очки: " + score);
      location.reload(); // перезапуск игры
    }
  });

  // Увеличение сложности
  if(score % 10 === 0 && score > 0) enemySpeed = 2 + Math.floor(score/10);
}

// Отрисовка объектов
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Игрок
  ctx.fillStyle = "lime";
  ctx.fillRect(player.x, player.y, player.w, player.h);

  // Пули
  ctx.fillStyle = "yellow";
  bullets.forEach(b => ctx.fillRect(b.x, b.y, b.w, b.h));

  // Враги
  ctx.fillStyle = "red";
  enemies.forEach(e => ctx.fillRect(e.x, e.y, e.w, e.h));
}

// Управление
document.addEventListener('keydown', e => {
  if(e.key === 'ArrowLeft') player.x = Math.max(0, player.x-player.speed);
  if(e.key === 'ArrowRight') player.x = Math.min(canvas.width-player.w, player.x+player.speed);
  if(e.key === ' ') bullets.push({x: player.x+7, y: player.y, w:5, h:10});
});

// Основной цикл
function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

// Вызов спавна врагов каждую секунду
setInterval(() => { if(!gameOver) spawnEnemy(); }, 1000);

gameLoop();
</script>
</body>
</html>
